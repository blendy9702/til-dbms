# 데이터베이스 모델링

## 1. DB(데이터 베이스)와 DB 관리 시스템(DBMS)은 다른 개념이다.

- DB : 데이터를 저장하는 공간
- DBMS : DB를 관리하는 시스템

## 2. 데이터베이스 모델링

- 데이터베이스 모델링은 데이터베이스를 설계하는 과정이다.
- 데이터를 잘 분류해서 저장하는 방안을 고려하는 과정
- 잘 분류해 두면 데이터를 쉽게 찾을 수 있고, 데이터를 쉽게 추가하고 삭제할 수 있다.

## 3. 데이터베이스 모델링에서 최종 목적

- 데이터의 중복을 제거한다.
- 데이터의 무결성을 보장한다.
- 데이터의 일관성을 보장한다.

## 4. 우리는 관계(Relation)형태의 데이터베이스를 사용한다.

- RDBMS(Relational Database Management System)
- 관계형 데이터베이스는 테이블(Table)로 구성된다.
- 테이블은 행(Row)과 열(Column)로 구성된다.
- 행은 레코드(Record)라고도 한다.
- 열은 필드(Field)라고도 한다.
- MySql, Oracle, MSSQL, PostgreSQL, MariaDB 등이 있다.

## 5. 데이터베이스 모델링 과정

### 5.1 요구사항 분석

- 서비스 기획 참석이후
- 문장으로된 다양한 서비스 내용에 대해서 우선 대표적 속성(Attribute)를 추출
- 요구사항정의서를 작성한다.
- 추출된 속성(Attribute)을 이용해서 개체(Entity)를 분류한다.
- 개체(Entity) 간의 관계(Relation)을 찾는다.
- 이러한 개체(Entity)들을 묶어서 하나의 스키마(Schema)로 분류한다.

### 5.2 개념적 데이터 모델링

- ERD : Entity relation Diargram

### 5.3 논리적 데이터 모델링

- Excel 활용 및 PK(Primary Key), FK (Foreign Key), Relation Model 만들기

### 5.4 물리적 데이터 모델링

- 테이블 정의서, SQL Script 최종 생성

### 5.5. 데이터베이스 구축

- Reverse Engineering
- Forward Engineering

## 6. 데이터베이스 모델링 실습

### 6.1 핵심 `중복 데이터 제거`

- Schema 폴더 생성하기
  : 소문자 폴더로 저장하기
- Entity(객체)를 파일로 table 생성함
  : 소문자s(복수형) 로 생성
- 속성(Attribute) 생성함
  : 소문자로 칼럼명을 생성함
- 속성중 PK
  : PK 속성은 절대 중복되지 않는 조건
  : 자동증가 또는 유니크 속성을 부여하여야 함
  : 자동증가는 auto increment 속성을 부여하여야 함
  : 유니크 속성은 uuid 속성을 부여하여야 함
- 속성중 FK
  : 외래키 속성을 부여하여야 함.
  : 다른 테이블 즉, 엔티티와 관계를 연결시키는 키다.
  : 일반적으로 다른 테이블의 PK가 연결된다.

### 6.2. 핵심 `데이터의 내용은 1개여야 한다`

- 레코드 즉 입력되어져 있는 데이터가 만약 여러개라면
  : 데이터를 하나씩 배치하여서 FK 로 연결시켜 보자.
  : 만약 FK 가 여러개 배치된다면 새로운 표를 생성하고, 연결시켜 보자.

### 6.3. 대응수 알아보기

- 꼭 엑셀을 만들지 않더라도 대응수를 파악할 수 있다.
- 대응수란 하나의 테이블이 다른 테이블의 FK를 활용하는 것을 나타내는 기호.
- `1 : 1` 구조
- `1 : N` 구조
- `N : M` 구조

#### 대응수 알아내는 요령

- A 와 B 의 관계
- A 는 B 를 ~~~ 한다.
- B 는 A 에의해 ~~~ 한다.
- `하나`의 A 는 `한개/여러개` 의 B 를 ~ 한다.
- `하나`의 B 는 `한개/여러개` 의 A 에 의해 ~ 한다.

#### 6.3.1. `1 : N 구조`

- `회원`과 `이메일`의 관계를 파악해 보자.
- 회원은 이메일을 가지고 있다.
- 이메일은 회원에게 소유되어 있다.
- 한명의 회원은 이메일을 가지고 있다.
- 한명의 회원은 여러개의 이메일을 가지고 있다.
- 하나의 이메일은 한명의 회원에게 소유되어 있다.

- 최종적으로 회원 : 이메일은 `1 : N` 이다.
- `N` 쪽에 `FK` 를 생선한다.

#### 6.3.2. `N : M 구조`

- `학생` 과 `과목` 의 관계
- `학생` 은 `과목` 을 수강한다.
- `과목` 은 `학생` 에의해 수강된다.

- 한명의 `학생` 은 `여러개`의 `과목` 을 수강한다. (1 : N)
- 하나의 `과목` 은 `여러명`의 `학생` 에의해 수강된다 (1 : N)
- 학생과 과목은 `N : M`
- 무조건 table 생성하고 FK 를 모으자.

#### 6.3.3. `N : M 구조`

- `드라마` 와 `배우` 의 관계

- `배우` 는 `드라마` 에 출연한다.
- `드라마` 는 `배우` 에의해 출연된
- 하나의 `드라마` 는 `여러명`의 `배우` 가 출연된다.. (1 : N)
- 한명의 `배우` 는 `여러개`의 `드라마` 에 출연한다. (1 : N)
- 배우와 드라마는 `N : M`
- 무조건 table 생성하고 FK 를 모으자.

### 6.4. ERD 드리기

- https://app.diagrams.net/
